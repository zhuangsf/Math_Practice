# 小学数学四则运算出题工具 - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 产品名称
小学数学四则运算出题工具

### 1.2 产品目标
为小学生提供自动化的四则运算题目生成工具，帮助学生快速进行数学练习。

### 1.3 目标用户
- 小学生（主要用户）
- 小学数学老师
- 家长

---

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 运算类型选择（多选）
- [ ] 加法运算
- [ ] 减法运算
- [ ] 乘法运算
- [ ] 除法运算
- 支持多选，可选择一种或多种运算类型组合
- 至少选择一种运算类型才能生成题目

#### 2.1.2 运算元数量选择（单选）
- [ ] 二元运算（2个数字，1个运算符，如：3 + 5）
- [ ] 三元运算（3个数字，2个运算符，如：3 + 5 - 2）
- [ ] 四元运算（4个数字，3个运算符，如：3 + 5 - 2 × 4）
- 单选，只能选择一种运算元数量

#### 2.1.3 题目生成
- 根据选择的运算类型和运算元数量生成题目
- 题目数量可配置（默认20题，可调整20，50，100题）
- 一键生成题目
- 自动计算答案

#### 2.1.4 题目显示
- 清晰展示题目
- 显示题目序号
- 显示运算表达式
- 显示标准答案（可隐藏/显示切换）

#### 2.1.5 答题模式（新增）
- [ ] **模式切换**：支持"练习模式"和"答题模式"两种模式
  - 练习模式：仅显示题目，用于打印或导出练习
  - 答题模式：可在题目下方输入答案，支持在线答题
- [ ] **答案输入**：
  - 每个题目下方提供答案输入框
  - 支持数字输入（整数）
  - 输入框支持键盘输入和鼠标点击
  - 支持Tab键快速切换输入框
  - 输入框实时验证格式（仅允许数字）
- [ ] **答题提交**：
  - 支持逐题提交（输入后立即验证）
  - 支持批量提交（完成所有题目后统一提交）
  - 提交后显示答题结果（正确/错误）
  - 支持重新答题（清空答案重新开始）
- [ ] **答题状态显示**：
  - 未答题：输入框为空，显示提示
  - 已答题未提交：输入框有值，显示待提交状态
  - 已提交正确：显示绿色对勾，答案正确
  - 已提交错误：显示红色叉号，显示正确答案

#### 2.1.6 评分系统（新增）
- [ ] **自动评分**：
  - 提交答案后自动计算得分
  - 显示得分格式：正确数/总题数（如：18/20）
  - 显示正确率百分比（如：90%）
  - 显示等级评价：
    - 优秀：≥90%
    - 良好：80%-89%
    - 及格：60%-79%
    - 需努力：<60%
- [ ] **答题统计**：
  - 显示答题用时（从开始答题到提交的时间）
  - 显示平均每题用时
  - 显示最快答题题目和最慢答题题目
- [ ] **成绩展示**：
  - 以卡片形式展示成绩概览
  - 使用图表展示得分情况（可选）
  - 支持成绩导出（记录到本地）

#### 2.1.7 错题分析（新增）
- [ ] **错题记录**：
  - 自动记录所有错题
  - 记录错题的完整信息（题目、学生答案、正确答案）
  - 记录错题时间戳
- [ ] **错题分类统计**：
  - 按运算类型统计错题数量（加法、减法、乘法、除法）
  - 按运算元数量统计错题数量（二元、三元、四元）
  - 按难度级别统计错题分布
  - 显示错题类型占比图表
- [ ] **错题详情分析**：
  - 显示每道错题的详细信息
  - 分析错误原因（计算错误、符号错误、运算顺序错误等）
  - 显示错题的运算类型和难度级别
  - 支持查看错题的标准答案和解题步骤

#### 2.1.8 个性化辅导计划（新增）
- [ ] **智能分析**：
  - 基于错题分析结果，识别薄弱环节
  - 分析学生在各运算类型上的掌握程度
  - 分析学生在各难度级别上的表现
- [ ] **辅导建议生成**：
  - 自动生成个性化辅导计划
  - 推荐需要加强的运算类型（如：建议加强乘法练习）
  - 推荐需要加强的难度级别（如：建议加强三元运算练习）
  - 提供具体的学习建议和练习方向
- [ ] **错题本功能**：
  - 生成错题本，包含所有错题
  - 支持错题本导出（TXT、PDF格式）
  - 支持错题本打印
  - 支持基于错题本重新生成相似题目进行练习
- [ ] **练习推荐**：
  - 根据错题分析，推荐针对性练习配置
  - 一键应用推荐配置，快速生成练习题目
  - 支持渐进式练习（从简单到复杂）

#### 2.1.9 导出功能
- 支持导出为文本文件（.txt）
- 支持导出为PDF文件
- 可选择是否包含答案
- 文件命名格式：四则运算题_YYYYMMDD_HHMMSS.txt/pdf
- [ ] **新增导出选项**：
  - 支持导出答题结果（包含学生答案和正确答案）
  - 支持导出错题本
  - 支持导出成绩报告（包含评分和错题分析）

### 2.2 辅助功能

#### 2.2.1 数值范围设置
- 可设置数字范围（默认：0-1000）
- 最小值：0
- 最大值：1000
- 除法题目保证能整除（无余数）

#### 2.2.2 打印功能
- 支持打印题目
- 支持打印答案（可选）

---

## 3. 非功能需求

### 3.1 性能要求
- 题目生成响应时间 < 1秒
- 支持100题批量生成
- 页面加载时间 < 3秒

### 3.2 兼容性
- 支持主流浏览器（Chrome、Edge、Firefox）
- 响应式设计，适配PC和平板设备

### 3.3 易用性
- 界面简洁友好，适合小学生使用
- 操作流程简单直观
- 提供操作提示

### 3.4 可靠性
- 答案计算100%准确
- 除法题目保证整除
- 不生成负数结果（针对小学低年级）

---

## 4. 用户界面设计

### 4.1 页面布局

```
┌─────────────────────────────────────────────────────┐
│              小学数学四则运算出题工具                  │
├─────────────────────────────────────────────────────┤
│                                                     │
│  【运算元数量】（单选）                                │
│  ⚪ 二元运算  ⚪ 三元运算  ⚪ 四元运算                 │
│                                                     │
│  【数值范围】                                         │
│  最小值: [0]  最大值: [1000]                         │
│                                                     │
│  【运算类型】（多选）                                  │
│  ☑ 加法  ☑ 减法  ☑ 乘法  ☑ 除法                     │
│                                                     │
│  【题目数量】                                         │
│  数量: [20] 题  （可选：20题 | 50题 | 100题）        │
│                                                     │
│  ☑ 显示答案（勾选则直接显示答案）                     │
│  ⚪ 练习模式  ⚪ 答题模式（可输入答案在线答题）         │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │            [生成题目]                         │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  【答题模式下的题目显示】                              │
│  ┌──────────┬──────────┬──────────┬──────────┐      │
│  │ 第1题:   │ 第6题:   │ 第11题:  │ 第16题:  │      │
│  │ 25 + 37  │ 68 - 23  │ 15 × 6   │ 84 ÷ 7   │      │
│  │ = [___]  │ = [___]  │ = [___]  │ = [___]  │      │
│  │   ✓      │   ✗      │   ✓      │   ✓      │      │
│  │          │          │          │          │      │
│  │ 第2题:   │ 第7题:   │ 第12题:  │ 第17题:  │      │
│  │ 45 + 12  │ 90 - 35  │ 8 × 12   │ 72 ÷ 9   │      │
│  │ = [___]  │ = [___]  │ = [___]  │ = [___]  │      │
│  │   ✓      │   ✓      │   ✓      │   ✓      │      │
│  │          │          │          │          │      │
│  │   ...    │   ...    │   ...    │   ...    │      │
│  └──────────┴──────────┴──────────┴──────────┘      │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  [提交答案]  [重新答题]  [查看错题]           │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  【成绩展示区域】                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  得分：18/20  (90%)  等级：优秀              │   │
│  │  答题用时：15分30秒  平均每题：46.5秒        │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  【错题分析区域】                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  错题统计：                                    │   │
│  │  运算类型：加法(0) 减法(1) 乘法(1) 除法(0)    │   │
│  │  难度级别：二元(0) 三元(1) 四元(1)           │   │
│  │                                              │   │
│  │  薄弱环节：减法和乘法运算需要加强             │   │
│  │  建议：多练习三元和四元运算                  │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐              │
│  │导出TXT│ │导出PDF│ │  打印 │ │导出错题│            │
│  └──────┘ └──────┘ └──────┘ └──────┘              │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**说明：**
- 题目区域分为4列显示，每列显示等量的题目
- 如果题目数不是4的倍数，最后一列的题目数可能少一些
- 当"显示答案"选项勾选时，每个题目的答案会显示在"="后面
- 答案示例：`25 + 37 = 62`（显示答案模式）

### 4.2 交互流程

#### 4.2.1 基础练习流程
1. 用户选择运算类型（可多选）
2. 用户选择运算元数量（单选）
3. （可选）调整数值范围
4. （可选）调整题目数量
5. 选择"练习模式"或"答题模式"
6. 点击"生成题目"按钮
7. 系统生成并显示题目
8. 用户可以查看答案、导出或打印

#### 4.2.2 答题模式流程（新增）
1. 选择"答题模式"
2. 生成题目后，在输入框中输入答案
3. 完成所有题目后，点击"提交答案"按钮
4. 系统自动批改并显示评分结果
5. 查看错题分析和个性化辅导建议
6. 可选择"重新答题"或"查看错题"
7. 可导出错题本或成绩报告

#### 4.2.3 错题练习流程（新增）
1. 在错题分析区域点击"查看错题"
2. 系统显示所有错题列表
3. 可基于错题本重新生成相似题目
4. 可导出错题本（TXT/PDF）
5. 可打印错题本进行线下练习

---

## 5. 技术实现建议

### 5.1 技术栈
- 前端：HTML + CSS + JavaScript（或使用Vue/React框架）
- PDF导出：jsPDF库
- 题目布局：CSS Grid（4列布局）
- 纯静态页面，无需后端服务

### 5.2 题目生成逻辑

#### 5.2.1 二元运算
- 随机生成两个数字（在指定范围内）
- 随机选择一种已选运算类型
- 计算答案
- 除法特殊处理：保证能整除

#### 5.2.2 三元运算
- 随机生成三个数字
- 随机选择两种已选运算类型
- 按标准运算顺序计算答案
- 注意减法和除法的约束（避免负数、保证整除）

#### 5.2.3 四元运算
- 随机生成四个数字
- 随机选择三种已选运算类型
- 按标准运算顺序（先乘除后加减）计算答案
- 确保所有步骤的结果都符合小学数学规范

### 5.3 约束规则

#### 5.3.1 加法
- 结果不超过最大值范围

#### 5.3.2 减法
- 被减数 ≥ 减数（保证结果非负）

#### 5.3.3 乘法
- 结果不超过最大值范围

#### 5.3.4 除法
- 被除数 ≥ 除数（除数不为0）
- 保证能整除（余数为0）

### 5.4 分数运算实现建议

#### 5.4.1 分数表示
- 使用对象表示分数：`{ numerator: number, denominator: number }`
- 分数运算前先约分（求最大公因数）
- 结果自动化为最简分数

#### 5.4.2 分数加减法
- **同分母**：直接加减分子，分母不变
- **异分母**：先通分（求最小公倍数），再加减
- 结果约分到最简形式

#### 5.4.3 分数乘除法
- **乘法**：分子乘分子，分母乘分母，然后约分
- **除法**：乘以倒数，然后约分

#### 5.4.4 分数显示格式
- 真分数：`3/4`
- 假分数：`7/4` 或 `1 3/4`（带分数，可选）
- 整数：`5` 或 `5/1`

### 5.5 小数运算实现建议

#### 5.5.1 小数精度处理
- 使用 `decimal.js` 或类似库处理小数精度
- 避免 JavaScript 浮点数精度问题
- 答案保留指定小数位数（如2位小数）

#### 5.5.2 小数运算
- 加减法：对齐小数点后直接运算
- 乘除法：按小数位数规则计算
- 结果四舍五入到指定精度

#### 5.5.3 小数显示格式
- 标准格式：`3.14`
- 整数部分为0：`0.5`
- 末尾0处理：`3.50` 显示为 `3.5`

### 5.6 百分数实现建议

#### 5.6.1 百分数生成
- 百分数与小数互化：`0.75 = 75%`
- 百分数与分数互化：`3/4 = 75%`
- 百分数应用题：求百分比、求部分量、求总量

#### 5.6.2 百分数计算
- 转换为小数进行计算
- 结果转换回百分数格式

### 5.7 单位换算实现建议

#### 5.7.1 换算表定义
- 定义各单位的换算关系（如：1米 = 10分米 = 100厘米）
- 使用换算系数进行计算

#### 5.7.2 题目生成
- 随机选择源单位和目标单位
- 生成合理的数值范围
- 确保换算结果在合理范围内

### 5.8 几何计算实现建议

#### 5.8.1 图形参数生成
- 长方形/正方形：随机生成长和宽（或边长）
- 三角形：随机生成底和高
- 圆形：随机生成半径
- 长方体/正方体：随机生成长、宽、高（或边长）

#### 5.8.2 计算公式
- 周长：长方形 `2(a+b)`，正方形 `4a`
- 面积：长方形 `a×b`，正方形 `a²`，三角形 `(底×高)/2`，圆形 `πr²`
- 体积：长方体 `a×b×c`，正方体 `a³`

### 5.9 倍数因数实现建议

#### 5.9.1 倍数生成
- 给定一个数，找出它的倍数
- 或给定倍数，找出原数

#### 5.9.2 因数生成
- 给定一个数，找出它的所有因数
- 或给定因数，找出原数

#### 5.9.3 GCD和LCM计算
- GCD：使用欧几里得算法
- LCM：`LCM(a,b) = (a×b) / GCD(a,b)`

### 5.10 质数合数实现建议

#### 5.10.1 质数判断
- 使用试除法判断质数
- 优化：只需检查到 `√n`

#### 5.10.2 质因数分解
- 从2开始试除
- 记录所有质因数及其指数

### 5.11 比较大小实现建议

#### 5.11.1 统一格式比较
- 将不同格式的数转换为统一格式（如都转为小数）
- 然后进行比较

#### 5.11.2 答案格式
- 支持输入：`>`、`<`、`=`
- 或支持输入：`大于`、`小于`、`等于`

### 5.12 估算实现建议

#### 5.12.1 估算规则
- 加减法：四舍五入到十位或百位
- 乘除法：四舍五入到合适位数

#### 5.12.2 答案验证
- 允许一定误差范围（如±10%）
- 或允许在指定范围内都算正确

### 5.13 找规律实现建议

#### 5.13.1 数字规律
- 等差数列：`a, a+d, a+2d, ...`
- 等比数列：`a, a×r, a×r², ...`
- 斐波那契数列等

#### 5.13.2 图形规律
- 位置变化规律
- 颜色变化规律
- 形状变化规律

---

## 6. 开发计划

### 阶段一：基础功能开发
- 页面UI设计和实现
- 运算类型选择功能
- 运算元数量选择功能
- 题目生成核心逻辑

### 阶段二：功能完善
- 数值范围设置
- 题目数量设置
- 答案显示/隐藏
- 导出TXT功能

### 阶段三：增强功能
- 导出PDF功能
- 打印功能
- 历史记录功能
- 响应式优化

### 阶段四：答题与评分功能（新增）
- 答题模式UI设计和实现
- 答案输入框组件开发
- 答案提交和验证逻辑
- 自动评分系统
- 答题统计功能

### 阶段五：错题分析与辅导（新增）
- 错题记录和存储
- 错题分类统计
- 错题分析算法
- 个性化辅导计划生成
- 错题本功能
- 练习推荐系统

### 阶段六：分数运算和小数运算（高优先级）
- 分数运算题目生成器开发
  - 分数加减法（同分母、异分母）
  - 分数乘除法
  - 分数与整数混合运算
  - 分数化简练习
- 小数运算题目生成器开发
  - 小数加减法
  - 小数乘除法
  - 小数与整数混合运算
  - 小数四则混合运算
- 分数和小数答题模式支持
- 分数和小数答案验证逻辑
- 分数和小数显示格式优化

### 阶段七：百分数、单位换算、几何计算（中优先级）
- 百分数题目生成器开发
  - 百分数与小数互化
  - 百分数与分数互化
  - 百分数应用题（求百分比、求部分量、求总量）
- 单位换算题目生成器开发
  - 长度单位换算（米、分米、厘米、毫米）
  - 重量单位换算（千克、克）
  - 面积单位换算（平方米、平方分米、平方厘米）
  - 体积单位换算（立方米、立方分米、立方厘米）
  - 时间单位换算（时、分、秒）
- 几何计算题目生成器开发
  - 周长计算（长方形、正方形）
  - 面积计算（长方形、正方形、三角形、圆形）
  - 体积计算（长方体、正方体）
- 相关答题模式和验证逻辑

### 阶段八：倍数因数、质数合数（中低优先级）
- 倍数与因数题目生成器开发
  - 找倍数练习
  - 找因数练习
  - 最大公因数（GCD）计算
  - 最小公倍数（LCM）计算
- 质数与合数题目生成器开发
  - 判断质数/合数
  - 质因数分解
- 相关答题模式和验证逻辑

### 阶段九：比较大小、估算、找规律（低优先级）
- 比较大小题目生成器开发
  - 整数比较
  - 小数比较
  - 分数比较
  - 混合数比较
- 估算练习题目生成器开发
  - 加减法估算
  - 乘除法估算
- 找规律题目生成器开发
  - 数字规律（等差数列、等比数列）
  - 图形规律
- 相关答题模式和验证逻辑

---

## 7. 验收标准

### 7.1 基础功能验收
- [ ] 能够多选运算类型
- [ ] 能够单选运算元数量
- [ ] 能够正确生成二元、三元、四元运算题目
- [ ] 答案计算100%准确
- [ ] 除法题目保证整除
- [ ] 能够导出TXT文件
- [ ] 能够导出PDF文件
- [ ] 界面美观，操作流畅
- [ ] 在主流浏览器中正常运行

### 7.2 答题功能验收（新增）
- [ ] 能够切换练习模式和答题模式
- [ ] 答题模式下每个题目都有输入框
- [ ] 输入框能够正确接收数字输入
- [ ] 能够提交答案并显示批改结果
- [ ] 能够正确标识正确和错误的题目
- [ ] 支持重新答题功能

### 7.3 评分功能验收（新增）
- [ ] 能够自动计算得分和正确率
- [ ] 能够正确显示等级评价
- [ ] 能够记录和显示答题用时
- [ ] 评分结果准确无误

### 7.4 错题分析功能验收（新增）
- [ ] 能够正确记录所有错题
- [ ] 能够按运算类型统计错题
- [ ] 能够按难度级别统计错题
- [ ] 错题统计结果准确
- [ ] 错题详情显示完整

### 7.5 辅导计划功能验收（新增）
- [ ] 能够基于错题分析生成辅导建议
- [ ] 辅导建议具有针对性
- [ ] 能够生成错题本
- [ ] 能够导出错题本
- [ ] 能够基于错题本推荐练习配置

### 7.6 分数运算功能验收（新增）
- [ ] 能够生成同分母分数加减法题目
- [ ] 能够生成异分母分数加减法题目
- [ ] 能够生成分数乘除法题目
- [ ] 能够生成分数与整数混合运算题目
- [ ] 分数答案计算100%准确
- [ ] 分数显示格式正确（如：3/4）
- [ ] 支持分数答案输入和验证
- [ ] 分数题目支持答题模式和评分

### 7.7 小数运算功能验收（新增）
- [ ] 能够生成小数加减法题目
- [ ] 能够生成小数乘除法题目
- [ ] 能够生成小数与整数混合运算题目
- [ ] 小数答案计算100%准确（考虑精度问题）
- [ ] 小数显示格式正确
- [ ] 支持小数答案输入和验证
- [ ] 小数题目支持答题模式和评分

### 7.8 百分数功能验收（新增）
- [ ] 能够生成百分数与小数互化题目
- [ ] 能够生成百分数与分数互化题目
- [ ] 能够生成百分数应用题
- [ ] 百分数答案计算100%准确
- [ ] 百分数显示格式正确（如：75%）
- [ ] 支持百分数答案输入和验证

### 7.9 单位换算功能验收（新增）
- [ ] 能够生成长度单位换算题目
- [ ] 能够生成重量单位换算题目
- [ ] 能够生成面积单位换算题目
- [ ] 能够生成体积单位换算题目
- [ ] 能够生成时间单位换算题目
- [ ] 换算结果100%准确
- [ ] 支持单位答案输入和验证

### 7.10 几何计算功能验收（新增）
- [ ] 能够生成周长计算题目（长方形、正方形）
- [ ] 能够生成面积计算题目（长方形、正方形、三角形、圆形）
- [ ] 能够生成体积计算题目（长方体、正方体）
- [ ] 几何计算答案100%准确
- [ ] 支持几何图形参数随机生成
- [ ] 支持几何答案输入和验证

### 7.11 倍数因数功能验收（新增）
- [ ] 能够生成找倍数题目
- [ ] 能够生成找因数题目
- [ ] 能够生成最大公因数（GCD）计算题目
- [ ] 能够生成最小公倍数（LCM）计算题目
- [ ] 倍数因数计算100%准确
- [ ] 支持倍数因数答案输入和验证

### 7.12 质数合数功能验收（新增）
- [ ] 能够生成判断质数/合数题目
- [ ] 能够生成质因数分解题目
- [ ] 质数判断100%准确
- [ ] 质因数分解结果100%准确
- [ ] 支持质数合数答案输入和验证

### 7.13 比较大小功能验收（新增）
- [ ] 能够生成整数比较题目
- [ ] 能够生成小数比较题目
- [ ] 能够生成分数比较题目
- [ ] 能够生成混合数比较题目
- [ ] 比较结果100%准确
- [ ] 支持比较大小答案输入和验证（>、<、=）

### 7.14 估算功能验收（新增）
- [ ] 能够生成加减法估算题目
- [ ] 能够生成乘除法估算题目
- [ ] 估算结果在合理范围内
- [ ] 支持估算答案输入和验证（允许一定误差范围）

### 7.15 找规律功能验收（新增）
- [ ] 能够生成数字规律题目（等差数列、等比数列）
- [ ] 能够生成图形规律题目
- [ ] 规律识别100%准确
- [ ] 支持找规律答案输入和验证

---

## 8. 风险和限制

### 8.1 风险
- 四元运算可能产生复杂的运算顺序，需要严格按照数学规则计算
- 多运算符组合可能产生边界情况，需要充分测试

### 8.2 限制
- 目前仅支持整数运算
- 暂不支持括号和小数
- 暂不支持自定义运算符优先级

---

## 9. 后续扩展方向

- 支持小数运算
- 支持括号运算
- 支持分数运算
- 添加计时功能（已完成：答题用时统计）
- 添加错题本功能（已完成）
- 支持在线提交答案并自动批改（已完成）
- 添加成绩统计和图表展示（部分完成：基础统计）
- 支持难度等级选择（简单/中等/困难）
- [ ] **新增扩展方向**：
  - 支持答题历史记录（保存多次答题记录）
  - 支持成绩趋势分析（展示学习进步曲线）
  - 支持多人对比（家长可查看多个孩子的学习情况）
  - 支持自定义评分标准
  - 支持答题提示功能（提示运算步骤）
  - 支持语音答题（语音输入答案）
  - 支持手写识别答题（手写数字识别）
  - 支持AI智能出题（根据错题自动生成相似题目）

---

---

## 10. 答题与评分功能详细设计（新增）

### 10.1 答题模式设计

#### 10.1.1 模式切换
- **练习模式**（默认）：
  - 仅显示题目，不提供输入框
  - 适合打印和导出练习
  - 可切换显示/隐藏答案
  
- **答题模式**：
  - 每个题目下方显示答案输入框
  - 输入框样式：数字输入框，宽度适中
  - 支持键盘输入和鼠标点击
  - 支持Tab键快速切换
  - 输入验证：仅允许输入整数（负数、小数、字母等自动过滤）

#### 10.1.2 答题状态管理
- **未答题状态**：
  - 输入框为空
  - 显示占位符提示："请输入答案"
  - 输入框边框为默认颜色
  
- **已输入未提交状态**：
  - 输入框有值
  - 输入框边框为蓝色（表示已输入）
  - 显示"待提交"提示
  
- **已提交正确状态**：
  - 显示绿色对勾图标（✓）
  - 输入框背景为浅绿色
  - 显示正确答案（可选）
  
- **已提交错误状态**：
  - 显示红色叉号图标（✗）
  - 输入框背景为浅红色
  - 显示学生答案和正确答案对比
  - 正确答案用绿色高亮显示

#### 10.1.3 答题提交机制
- **逐题提交模式**（可选）：
  - 输入答案后按Enter键或点击"提交"按钮
  - 立即显示该题目的正确/错误状态
  - 适合实时反馈学习
  
- **批量提交模式**（默认）：
  - 完成所有题目后，点击"提交答案"按钮
  - 一次性批改所有题目
  - 显示总体评分结果
  - 适合模拟考试场景

### 10.2 评分系统设计

#### 10.2.1 评分计算
- **得分计算**：
  - 正确题数 / 总题数
  - 显示格式：`18/20` 或 `18分/20分`
  
- **正确率计算**：
  - (正确题数 / 总题数) × 100%
  - 显示格式：`90%`
  - 保留1位小数（如：87.5%）
  
- **等级评价**：
  - 优秀：≥90%（显示绿色，图标：⭐）
  - 良好：80%-89%（显示蓝色，图标：👍）
  - 及格：60%-79%（显示橙色，图标：✓）
  - 需努力：<60%（显示红色，图标：💪）

#### 10.2.2 答题统计
- **时间统计**：
  - 开始时间：点击"生成题目"或进入答题模式的时间
  - 结束时间：点击"提交答案"的时间
  - 答题用时：结束时间 - 开始时间
  - 显示格式：`15分30秒` 或 `15:30`
  
- **平均用时**：
  - 答题用时 / 总题数
  - 显示格式：`46.5秒/题`
  
- **最快/最慢题目**：
  - 记录每道题目的答题时间（如果支持逐题提交）
  - 显示最快答题题目和最慢答题题目

### 10.3 错题分析设计

#### 10.3.1 错题数据结构
```typescript
interface WrongQuestion {
  questionId: string;           // 题目ID
  question: Question;            // 题目信息
  studentAnswer: number;        // 学生答案
  correctAnswer: number;        // 正确答案
  operationType: OperationType; // 运算类型
  operandCount: 2 | 3 | 4;     // 运算元数量
  timestamp: Date;              // 答题时间
  timeSpent?: number;           // 该题用时（秒）
}
```

#### 10.3.2 错题分类统计
- **按运算类型统计**：
  - 加法错题数、减法错题数、乘法错题数、除法错题数
  - 计算各类型错题占比
  - 显示柱状图或饼图
  
- **按运算元数量统计**：
  - 二元运算错题数、三元运算错题数、四元运算错题数
  - 计算各难度级别错题占比
  - 显示柱状图或饼图

#### 10.3.3 错题详情展示
- **错题列表**：
  - 显示所有错题的完整信息
  - 包括：题目表达式、学生答案、正确答案、运算类型、难度级别
  - 支持排序（按运算类型、按难度级别、按时间）
  
- **错题分析**：
  - 识别错误原因类型：
    - 计算错误（答案接近但不对）
    - 符号错误（加减乘除符号混淆）
    - 运算顺序错误（先乘除后加减）
    - 完全错误（答案相差很大）

### 10.4 个性化辅导计划设计

#### 10.4.1 薄弱环节识别
- **运算类型薄弱度**：
  - 计算各运算类型的错误率
  - 错误率 > 30% 视为薄弱环节
  - 错误率 > 50% 视为严重薄弱环节
  
- **难度级别薄弱度**：
  - 计算各难度级别的错误率
  - 错误率 > 30% 视为薄弱环节
  - 错误率 > 50% 视为严重薄弱环节

#### 10.4.2 辅导建议生成
- **建议模板**：
  - "您在【运算类型】方面需要加强，建议多练习相关题目"
  - "您在【难度级别】运算上错误较多，建议从简单题目开始练习"
  - "您的【运算类型】掌握较好，可以适当增加难度"
  
- **推荐练习配置**：
  - 基于薄弱环节，推荐练习配置
  - 例如：如果减法错误率高，推荐配置为：运算类型=减法，运算元数量=二元
  - 支持一键应用推荐配置

#### 10.4.3 错题本功能
- **错题本生成**：
  - 收集所有错题
  - 按运算类型或难度级别分组
  - 生成错题本文档
  
- **错题本导出**：
  - 支持导出为TXT格式
  - 支持导出为PDF格式
  - 包含题目、学生答案、正确答案、解析（可选）
  
- **基于错题本练习**：
  - 支持基于错题本重新生成相似题目
  - 相似题目保持相同的运算类型和难度级别
  - 数字可以变化，但运算结构相同

### 10.5 数据存储设计

#### 10.5.1 本地存储
- 使用 `localStorage` 存储答题记录
- 存储结构：
  ```json
  {
    "answerRecords": [
      {
        "sessionId": "session_xxx",
        "timestamp": "2026-01-26T10:30:00",
        "questions": [...],
        "answers": [...],
        "score": 18,
        "total": 20,
        "timeSpent": 930
      }
    ],
    "wrongQuestions": [...],
    "statistics": {
      "totalSessions": 10,
      "averageScore": 85.5,
      "improvementTrend": [...]
    }
  }
  ```

#### 10.5.2 数据导出
- 支持导出答题记录为JSON格式
- 支持导出成绩报告为PDF格式
- 支持导出错题本为TXT/PDF格式

---

---

## 11. 新增知识点功能需求

### 11.1 分数运算（高优先级）

#### 11.1.1 功能描述
支持分数相关的各种运算练习，包括分数加减法、乘除法、分数与整数混合运算等。

#### 11.1.2 适用年级
三至六年级

#### 11.1.3 题目类型
- **同分母分数加减法**：如 `3/5 + 2/5 = ?`
- **异分母分数加减法**：如 `1/2 + 1/3 = ?`
- **分数乘法**：如 `2/3 × 3/4 = ?`
- **分数除法**：如 `2/3 ÷ 1/4 = ?`
- **分数与整数混合运算**：如 `3 + 1/2 = ?`、`2/3 × 6 = ?`
- **分数化简**：如 `6/8 = ?`（答案：3/4）

#### 11.1.4 配置选项
- 分母范围：2-20（可配置）
- 分子范围：1-分母值（可配置）
- 运算类型：加法、减法、乘法、除法（可多选）
- 题目数量：20、50、100题
- 是否包含带分数：是/否

#### 11.1.5 答题模式支持
- 支持分数答案输入（格式：`3/4` 或 `3 1/2`）
- 支持答案验证（考虑分数化简，如 `6/8` 和 `3/4` 视为相同）
- 支持答题模式和评分系统

### 11.2 小数运算（高优先级）

#### 11.2.1 功能描述
支持小数相关的各种运算练习，包括小数加减法、乘除法、小数与整数混合运算等。

#### 11.2.2 适用年级
三至六年级

#### 11.2.3 题目类型
- **小数加减法**：如 `3.25 + 2.17 = ?`
- **小数乘法**：如 `2.5 × 3.4 = ?`
- **小数除法**：如 `6.3 ÷ 2.1 = ?`
- **小数与整数混合运算**：如 `3 + 2.5 = ?`、`4.5 × 2 = ?`
- **小数四则混合运算**：如 `3.2 + 1.5 × 2 = ?`

#### 11.2.4 配置选项
- 小数位数：1位、2位、3位（可配置）
- 数值范围：0.1-100（可配置）
- 运算类型：加法、减法、乘法、除法（可多选）
- 题目数量：20、50、100题
- 答案精度：保留1位、2位小数（可配置）

#### 11.2.5 答题模式支持
- 支持小数答案输入
- 支持答案验证（考虑精度问题，允许一定误差）
- 支持答题模式和评分系统

### 11.3 百分数（中优先级）

#### 11.3.1 功能描述
支持百分数相关的练习，包括百分数与小数互化、百分数与分数互化、百分数应用题等。

#### 11.3.2 适用年级
五至六年级

#### 11.3.3 题目类型
- **百分数与小数互化**：如 `0.75 = ?%`（答案：75%）、`45% = ?`（答案：0.45）
- **百分数与分数互化**：如 `3/4 = ?%`（答案：75%）、`60% = ?`（答案：3/5）
- **求百分比**：如 `20是50的百分之几？`（答案：40%）
- **求部分量**：如 `50的30%是多少？`（答案：15）
- **求总量**：如 `15是某个数的30%，这个数是多少？`（答案：50）

#### 11.3.4 配置选项
- 题目类型：互化、求百分比、求部分量、求总量（可多选）
- 数值范围：1-100（可配置）
- 题目数量：20、50、100题

#### 11.3.5 答题模式支持
- 支持百分数答案输入（格式：`75%` 或 `75`）
- 支持小数和分数答案输入（根据题目类型）
- 支持答题模式和评分系统

### 11.4 单位换算（中优先级）

#### 11.4.1 功能描述
支持各种单位之间的换算练习，包括长度、重量、面积、体积、时间等单位换算。

#### 11.4.2 适用年级
一至六年级

#### 11.4.3 题目类型
- **长度单位换算**：米、分米、厘米、毫米之间的换算
  - 如 `3米 = ?厘米`（答案：300厘米）
  - 如 `250厘米 = ?米`（答案：2.5米）
- **重量单位换算**：千克、克之间的换算
  - 如 `2.5千克 = ?克`（答案：2500克）
- **面积单位换算**：平方米、平方分米、平方厘米之间的换算
  - 如 `3平方米 = ?平方分米`（答案：300平方分米）
- **体积单位换算**：立方米、立方分米、立方厘米之间的换算
  - 如 `2立方米 = ?立方分米`（答案：2000立方分米）
- **时间单位换算**：时、分、秒之间的换算
  - 如 `2.5小时 = ?分钟`（答案：150分钟）

#### 11.4.4 配置选项
- 单位类型：长度、重量、面积、体积、时间（可多选）
- 数值范围：根据单位类型设置合理范围
- 题目数量：20、50、100题
- 换算方向：大单位转小单位、小单位转大单位、混合（可配置）

#### 11.4.5 答题模式支持
- 支持带单位的答案输入（如：`300厘米` 或 `300`）
- 支持答案验证（考虑单位）
- 支持答题模式和评分系统

### 11.5 几何计算（中优先级）

#### 11.5.1 功能描述
支持几何图形的周长、面积、体积计算练习。

#### 11.5.2 适用年级
三至六年级

#### 11.5.3 题目类型
- **周长计算**：
  - 长方形：给定长和宽，求周长
  - 正方形：给定边长，求周长
- **面积计算**：
  - 长方形：给定长和宽，求面积
  - 正方形：给定边长，求面积
  - 三角形：给定底和高，求面积
  - 圆形：给定半径，求面积（π取3.14）
- **体积计算**：
  - 长方体：给定长、宽、高，求体积
  - 正方体：给定边长，求体积

#### 11.5.4 配置选项
- 图形类型：长方形、正方形、三角形、圆形、长方体、正方体（可多选）
- 计算类型：周长、面积、体积（可多选）
- 参数范围：根据图形类型设置合理范围（如：1-100厘米）
- 题目数量：20、50、100题
- π值设置：3.14 或 3.14159（可配置）

#### 11.5.5 答题模式支持
- 支持数值答案输入
- 支持答案验证（考虑π的精度）
- 支持答题模式和评分系统
- 可显示图形示意图（可选）

### 11.6 倍数与因数（中优先级）

#### 11.6.1 功能描述
支持倍数和因数相关的练习，包括找倍数、找因数、最大公因数、最小公倍数等。

#### 11.6.2 适用年级
四至六年级

#### 11.6.3 题目类型
- **找倍数**：如 `8的倍数有哪些？`（答案：8, 16, 24, ...）
- **找因数**：如 `12的因数有哪些？`（答案：1, 2, 3, 4, 6, 12）
- **最大公因数（GCD）**：如 `12和18的最大公因数是？`（答案：6）
- **最小公倍数（LCM）**：如 `4和6的最小公倍数是？`（答案：12）

#### 11.6.4 配置选项
- 题目类型：找倍数、找因数、GCD、LCM（可多选）
- 数值范围：2-100（可配置）
- 题目数量：20、50、100题
- 倍数/因数数量：要求找出几个（如：找出3个倍数）

#### 11.6.5 答题模式支持
- 支持多个答案输入（用逗号分隔）
- 支持答案验证（考虑顺序）
- 支持答题模式和评分系统

### 11.7 质数与合数（低优先级）

#### 11.7.1 功能描述
支持质数和合数相关的练习，包括判断质数/合数、质因数分解等。

#### 11.7.2 适用年级
五至六年级

#### 11.7.3 题目类型
- **判断质数/合数**：如 `17是质数还是合数？`（答案：质数）
- **质因数分解**：如 `12 = ?`（答案：2² × 3）

#### 11.7.4 配置选项
- 题目类型：判断质数/合数、质因数分解（可多选）
- 数值范围：2-100（可配置）
- 题目数量：20、50、100题

#### 11.7.5 答题模式支持
- 支持答案输入（质数/合数 或 质因数分解表达式）
- 支持答案验证
- 支持答题模式和评分系统

### 11.8 比较大小（低优先级）

#### 11.8.1 功能描述
支持各种数的大小比较练习，包括整数、小数、分数之间的比较。

#### 11.8.2 适用年级
一至六年级

#### 11.8.3 题目类型
- **整数比较**：如 `25 ? 30`（答案：<）
- **小数比较**：如 `3.14 ? 3.15`（答案：<）
- **分数比较**：如 `1/2 ? 2/3`（答案：<）
- **混合数比较**：如 `3.5 ? 7/2`（答案：=）

#### 11.8.4 配置选项
- 题目类型：整数、小数、分数、混合（可多选）
- 数值范围：根据类型设置合理范围
- 题目数量：20、50、100题

#### 11.8.5 答题模式支持
- 支持符号输入：`>`、`<`、`=`
- 或支持文字输入：`大于`、`小于`、`等于`
- 支持答案验证
- 支持答题模式和评分系统

### 11.9 估算练习（低优先级）

#### 11.9.1 功能描述
支持估算相关的练习，帮助学生培养估算能力。

#### 11.9.2 适用年级
三至六年级

#### 11.9.3 题目类型
- **加减法估算**：如 `估算：28 + 43 ≈ ?`（答案：70，允许范围65-75）
- **乘除法估算**：如 `估算：48 × 23 ≈ ?`（答案：1000，允许范围900-1100）

#### 11.9.4 配置选项
- 题目类型：加减法估算、乘除法估算（可多选）
- 数值范围：根据类型设置合理范围
- 题目数量：20、50、100题
- 误差范围：±10%、±20%（可配置）

#### 11.9.5 答题模式支持
- 支持估算值输入
- 支持答案验证（允许一定误差范围）
- 支持答题模式和评分系统

### 11.10 找规律（低优先级）

#### 11.10.1 功能描述
支持数字规律和图形规律的练习，培养学生的观察和推理能力。

#### 11.10.2 适用年级
一至六年级

#### 11.10.3 题目类型
- **数字规律**：
  - 等差数列：如 `2, 5, 8, 11, ?`（答案：14）
  - 等比数列：如 `2, 4, 8, 16, ?`（答案：32）
  - 斐波那契数列：如 `1, 1, 2, 3, 5, ?`（答案：8）
- **图形规律**：
  - 位置变化：如图形位置的变化规律
  - 颜色变化：如图形颜色的变化规律
  - 形状变化：如图形形状的变化规律

#### 11.10.4 配置选项
- 题目类型：数字规律、图形规律（可多选）
- 规律类型：等差数列、等比数列、斐波那契、自定义（可多选）
- 题目数量：20、50、100题
- 难度级别：简单、中等、困难（可配置）

#### 11.10.5 答题模式支持
- 支持答案输入（数字或图形描述）
- 支持答案验证
- 支持答题模式和评分系统
- 可显示图形（图形规律题目）

---

**文档版本**: v2.1
**创建日期**: 2026-01-26
**最后更新**: 2026-01-26
**更新内容**: 新增10个小学数学知识点功能需求（分数运算、小数运算、百分数、单位换算、几何计算、倍数因数、质数合数、比较大小、估算、找规律），并更新开发计划、技术实现建议和验收标准